# مشروع إدخال وإخراج (I/O Project): بناء برنامج واجهة أوامر (Command Line Program)

هذا الفصل هو مراجعة للعديد من المهارات التي تعلمتها حتى الآن واستكشاف لعدد قليل من ميزات المكتبة القياسية (standard library). سنقوم ببناء أداة واجهة أوامر (command line tool) تتفاعل مع مدخلات ومخرجات الملفات وواجهة الأوامر لممارسة بعض مفاهيم Rust التي أصبحت تتقنها الآن.

إن سرعة Rust وأمانها، وإنتاجها لملف ثنائي واحد (single binary)، ودعمها للمنصات المتعددة (cross-platform) يجعلها لغة مثالية لإنشاء أدوات واجهة الأوامر، لذا في مشروعنا، سنقوم بصنع نسختنا الخاصة من أداة البحث الكلاسيكية في واجهة الأوامر `grep` (البحث العالمي عن تعبير نمطي والطباعة - **g**lobally search a **r**egular **e**xpression and **p**rint). في أبسط حالات الاستخدام، تبحث `grep` في ملف محدد عن سلسلة نصية (string) محددة. للقيام بذلك، تأخذ `grep` كوسطاء (arguments) لها مسار ملف وسلسلة نصية. بعد ذلك، تقرأ الملف، وتجد الأسطر في ذلك الملف التي تحتوي على argument السلسلة النصية، وتطبع تلك الأسطر.

على طول الطريق، سنوضح كيفية جعل أداة واجهة الأوامر الخاصة بنا تستخدم ميزات الطرفية (terminal) التي تستخدمها العديد من أدوات واجهة الأوامر الأخرى. سنقرأ قيمة متغير بيئة (environment variable) للسماح للمستخدم بتكوين سلوك أداتنا. سنقوم أيضاً بطباعة رسائل الخطأ إلى تدفق وحدة تحكم الخطأ القياسي (`stderr`) بدلاً من المخرجات القياسية (`stdout`) بحيث يمكن للمستخدم، على سبيل المثال، إعادة توجيه المخرجات الناجحة إلى ملف مع الاستمرار في رؤية رسائل الخطأ على الشاشة.

قام أحد أعضاء مجتمع Rust، وهو أندرو غالانت (Andrew Gallant)، بالفعل بإنشاء نسخة كاملة الميزات وسريعة جداً من `grep` تسمى `ripgrep`. وبالمقارنة، ستكون نسختنا بسيطة للغاية، ولكن هذا الفصل سيعطيك بعض المعرفة الخلفية التي تحتاجها لفهم مشروع واقعي مثل `ripgrep`.

سيجمع مشروع `grep` الخاص بنا عدداً من المفاهيم التي تعلمتها حتى الآن:

- تنظيم الكود ([الفصل 7][ch7]<!-- ignore -->)
- استخدام المتجهات (vectors) والسلاسل النصية ([الفصل 8][ch8]<!-- ignore -->)
- معالجة الأخطاء (Handling errors) ([الفصل 9][ch9]<!-- ignore -->)
- استخدام السمات (traits) وفترات الحياة (lifetimes) حيثما كان ذلك مناسباً ([الفصل 10][ch10]<!-- ignore -->)
- كتابة الاختبارات (Writing tests) ([الفصل 11][ch11]<!-- ignore -->)

سنقدم أيضاً بإيجاز الإغلاقات (closures)، والمكررات (iterators)، وكائنات السمات (trait objects)، والتي سيغطيها [الفصل 13][ch13]<!-- ignore --> و [الفصل 18][ch18]<!-- ignore --> بالتفصيل.

[ch7]: ch07-00-managing-growing-projects-with-packages-crates-and-modules.html
[ch8]: ch08-00-common-collections.html
[ch9]: ch09-00-error-handling.html
[ch10]: ch10-00-generics.html
[ch11]: ch11-00-testing.html
[ch13]: ch13-00-functional-features.html
[ch18]: ch18-00-oop.html
